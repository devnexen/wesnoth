
{GENERIC_UNIT_TEST test_lua_event_name (
    [event]
        name=start
        [fire_event]
            name=test
        [/fire_event]
    [/event]
    [event]
        name=test
        code=<<
            local actions = ...
            local ret, err = pcall(function()
                local some_variable = bar
            end)
            unit_test.pass_if(err:find('test'), 'error contains test')
        >>
    [/event]
)}

{GENERIC_UNIT_TEST test_lua_name (
    [event]
        name=start
        [fire_event]
            name=test
        [/fire_event]
    [/event]
    [event]
        name=test
        code=<<
            local actions = ...
            local ret, err = pcall(function()
                wesnoth.wml_actions.command(actions)
            end)
            unit_test.pass_if(err:find('"test"'), 'error contains "test"')
        >>
        [lua]
            name=test
            code=<<return bar>>
        [/lua]
    [/event]
)}

